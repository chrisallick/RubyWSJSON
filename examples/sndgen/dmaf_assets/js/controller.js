dmaf("controller",["DMAF","Instance","ActionManager"],function(e,t,n){function h(e,t){return e+t}function p(e,t){return e-t}function d(e){return Math.abs(e)}function v(e){return c.push(e),c.length>20&&c.shift(),c.reduce(h,0)/c.length}function m(e){return v(Math.max.apply(Math,[e.x,e.y,e.z].map(d).sort(p)))}function g(){var e=s.alpha,t=s.beta,i=s.gamma,o=Math.floor(e/90),c=m(u);c>l&&(c=l),f=Math.floor(c/l*5.999),r[o]&&o!==a&&(console.log("Triggering:",r[o]),n.onEvent(r[o]),a=o),setTimeout(g,100)}function y(){i=e.getInstance("customCode:data").obj,s=i.rotation,u=i.acceleration,o=i.noGravity}var r={0:"p1",1:"p2",2:"p3",3:"p4"},i,s,o,u,a,f=1,l=30,c=[];y.prototype=Object.create(t,{onAction:{value:function(e,t,r){switch(e){case"data.CREATE":g();break;case"drums1":f<2&&n.stop();break;case"drums2":f<3&&n.stop();break;case"drums3":f<4&&n.stop();break;case"pad1":break;case"pad2":break;case"harpgsp":f<2&&n.stop();break;case"vox":f<3&&n.stop();break;case"moog_bass":f<2&&n.stop();break;case"chopped_bass1":f<3&&n.stop();break;case"chopped_bass2":f<4&&n.stop();break;case"oberheim":f<4&&n.stop();break;case"synth_arp":f<5&&n.stop();break;default:}}}}),e.registerInstance("customCode","controller",y)});